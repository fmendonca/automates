---
- name: Demo Automation
  hosts: localhost
  gather_facts: false

  vars:
    openshift_namespace: "openshift-mtv"
  tasks:

    - name: Fetch Migration Plan Statuses from OpenShift
      kubernetes.core.k8s:
        api_version: forklift.konveyor.io/v1beta1
        kind: Migration
        namespace: "{{ openshift_namespace }}"
        verify_ssl: no  # Set to yes in production if your cluster uses signed certificates
      register: migration_plans

    - name: Display Migration Plan Statuses
      debug:
        msg: "{{ item.status }}"
      loop: "{{ migration_plans.resources }}"